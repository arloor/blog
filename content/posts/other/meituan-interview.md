---
title: "第一次跳槽|又快又好的感觉"
date: 2020-05-16T21:31:02+08:00
draft: true
categories: [ "undefined"]
tags: ["undefined"]
weight: 10
subtitle: ""
description : ""
keywords:
- 刘港欢 arloor moontell
---

刚刚得到了美团基础架构 监控平台组的offer。这是第一次成功的社招面试，感觉有必要记录一下，也许几十年后，这会是一个比较重要的转折点。
<!--more-->

## 时间线

1. 5月1日：投简历（应该是新的hc）
2. 5月6日，节后第一天:约一二面
3. 5月7日：一二面
4. 5月8日：说一二面通过，约三四面
5. 5月9日，周六，补班：三四面
6. 5月10日，周日：告知进入offer流程，要求提供薪酬材料
7. 5月12日：口头谈薪酬，评级超过预期，约定了一个超过我预期的价格
8. 5月13日：觉得在该评级下薪资相对低了，打电话过去，希望hr能再争取下，她说懂我意思了。然后进入offer审批流程
9. 5月14日：收到正式offer，薪资比之前谈的高了一点，hr应该帮争取了。

这是一时兴起投的简历，说实话也没有好好准备（没有准备），最后却得到一个好的结果，从岗位到评级到薪资都是比较满意的，不由地感概面试真的是玄学。从整个时间线来看，过程也是比较顺畅，没有拖拉，可以说是一次十分愉快的面试啦。

## 一面（组内同事）

1. spring的作用：ioc、aop
2. 有自己实现一个ioc框架吗？没有
3. 一台服务器最多只有65536个tcp连接吗？不是，因为tcp连接是远程ip+端口和本地ip+端口这四个因素确定的，所以可以有无限个
4. tcp选项的keepalive是什么作用
5. 为什么要应用层心跳？因为tcp的keepalive没有连接存活探测的功能，所以需要以检查对端断电，断网线这种情况
5. 有了解垃圾回收吗？可达链分析
6. 为什么不用引用计数算法？可达链分析选取了特定的root，从这里进行链式分析，解决引用计数不能解决的循环依赖问题
7. 有了解jvm的分代回收算法吗？没说地很清楚，忘记了
8. 有了解cms和g1回收器的区别吗？不了解
9. 说说netty设计上的优势？采用reactor模式+责任链模式，前者保证高性能，后者提供较好的code修改性。
10. redis cluster如何从多个单节点组成cluster？首先新加入的集群会对若干节点发送cluster meet消息，然后这若干个节点会在goosip的ping、pong中携带新节点的信息，新节点的信息最终传播给所有节点，所有节点都与新节点创建tcp连接——新节点加入成功
11. redis cluster的goosip协议有什么问题吗？以前没考虑过，非要我说，我就说一个是没有强一致性保证和tcp连接仅仅使用了单工的传播
12. 面试官说其实想问你这种主从下，会不会有写丢失的不一致情况出现？我说这个啊（这个其实不是cluster下的问题），说会，因为是异步拷贝。。。

还有一些问题忘记了，当时的感觉是jvm调优相关的问题都没有答出来，我就说不会，问到我会的就回答的比较好，netty和redis集群吧。

## 二面(leader)

1. 先自我介绍下。面试官在这个过程中目光不断地在屏幕上移来移去，感觉可能在看博客和github
2. 问问题了。介绍下volatile？保证每次从内存拿，保证可见性
3. 只能保证可见性吗？应该是的吧，面试官撇了撇嘴。。。后面查查确实能在一定程度保证顺序性
4. 关于jvm印象最深的是哪部分？jvm我看过，因为没好好复习，所以不能清晰地说出来，所以就“额。。。看过深入理解jvm，但是现在记不清了”，脑子里面类加载，双亲，内存分布模型，对象头什么东西都出来了，但是每个都不能清楚的说好，好在面试官说没关系。。一直到这里其实都挺尬的。
5. redis cluster相关，再问问，这些东西都在我博客里了，面试前看一眼，心里清晰的很，不展开讲
6. 后面就偏聊天了。首先夸下博客说，博客挺好的，有技术积淀挺好的，咂了两下嘴。
7. JVM调优了解吗？不了解，因为权限问题，没机会在生产上敲命令啥的。
8. 为什么想跳槽？原公司遇不到真正的架构问题，性能问题，想到大体量的公司看看，加快个人成长。
9. 你说说，遇到一个问题，你怎么去解决它，说说方法论。我就把自己的一套方法论说了下，看文档-形成整体的一个认识-从而找到问题所在的局部-在这个局部再探究-如果不行就看这个局部的源码。看源码的话，最重要是找到正确的入口，整个流程的起点，然后以看redis代码为例说下。
10. 说说五年的个人规划。想了一会，说我觉得从以往经历看，在学习一个东西的时候我还是能达到一定的深度的，无论是redis还是es还是网络编程，但是现在的问题是面还很窄，所以最近的想法就是在工作中去扩宽这个面，同时要保证能深入地去了解他们。相信保证深度地前提下去增加宽度，到一定程度会发现：东西都是通的，很多思想都是一样的，比如主从拷贝、分片等等。面试官说，你说的很对，我就有这种感觉👍
11. 然后就真聊天了。说这个坑是原来的人回老家了，本来想招个三年的，但是你学习能力在，主要还是看解决问题的能力，所以问题不大，后面看hr评估吧。当时觉得这就是有戏的意思，但是也没多想，因为面试本来就玄学嘛。

二面的话没有写题是比较意外的，因为一开始就约的是牛客网面试，我就等着面试烫死猪的。。。然后这个面试风格我感觉也是挺好的。因为以前就看到过“面试大家都懂”这样的话，大概就是问的东西都是能背的东西。而我这些能背的东西说实话都没背（所以就很尬嘛）。在这部分表现不是太好，但是在redis cluster部分聊的比较成功；然后较虚的两个问题上回答地也比较好。当然博客这种直观地东西加分感觉不少。。。

## 三面（部门leader）

一位女面试官，没有想到的，因为是女性的原因，所以感觉比较和蔼

1. 介绍下自己
2. 为什么redis proxy没有采用其他方案？客户端分片写的弊端说了下，大意就是隐藏cluster的细节，不需要客户端sdk去了解这些
3. redis proxy怎么保证高可用？我说有用etcd，没有其他的高可用保证，因为不会遇到proxy的可用性问题。她说理解，但是一定要呢？想了下，也搞个主从吧。她说为什么不考虑用负载均衡的呢？我说加入负载均衡层的话，负载均衡层一样可以问高可用怎么办😂她说倒也是
4. 分布式id实现？snowflake算法、uudi和自己瞎想的128位随机数，高64为base，用低64位增强随机性。想不到了她说，其实也可以了，回答的已经不错了。后来了解到，可以基于数据库，基于redis，特别是美团有自己的一套分布式id，可以提前了解。
5. 项目中遇到的问题，描述下，如果是你你怎么解决？就拿当前项目的平台化与要做业务需求的冲突说了下，然后说了下我觉得怎么解决，就是把业务抽出来呗
6. 还有什么问题吗？我说没有。。。瞬间尬了，然后就结束了。耗时30分钟

三面完还是比较忐忑的，特别是最后我说没有问题。。。

## HR面（谈薪资的hr）

1. 为什么要跳，工作情况这些问题不谈了
2. 你的工作心得，或者印象最深的一件事。说了大领导开会巴拉巴拉，然后我说了我们当前需要解决的问题，balabala把前情和环境以及其他人的表现说了下，然后说自己也不知道这样对不对，好不好，但是自己说了，正准备说以后这样的事情，我回谨慎发言的时候，她说在互联网公司的氛围你这应该是一种比较优良的品质👍加分项吧
3. 遇到过什么问题，你怎么解决的？我用打比方的形式说了下项目中遇到的问题。

大概也是三十分钟，最重要的可能也就是第二点吧。

## 总结

1. 网络编程是程序员走向架构、分布式的必由之路，因为一切系统交互都是网络io。所以netty真的需要学起来！
2. JVM调优这个东西看起来真的挺重要
3. 不同公司面试要求不一样，阿里以工作经验不足拒了我；美团却认为我经验少但是潜力大，有学习能力，解决问题能力这样
4. 美团真的敢招我，从二面面试官、hr的反馈都是相信你的潜力，对你期待挺大的。仅仅是期待就敢招
5. 愿意为“期待”、“潜力”买单。所以这种期待和潜力不是给你画大饼的，是真诚的吧
6. 开水团虽然福利差，但是不等于小气，这次招聘还是不小气的，涨幅超40%。。
7. 面试真的玄学，所以多试试永远是正确的，阿里不要你，美团夸死你。
8. 得到面试认可的人，流程就很快。我相信绝对不止一个人投了，但是我的offer没有拖延，没有压价，没有出现网上的各种关于美团招聘的幺蛾子。
9. 也许每一次社招都是不一样的，最重要的可能还是要有自己的亮点吧。如果能深入地聊下去，谁想你答我问题库里的题呢（也问不出来吧）
10. 谈薪资在说出自己预期的薪资前，一定要问评级！！！！我吃亏了
11. 很满意能跳到大厂的基础架构部门，感谢在原公司架构组学习到的东西，是敲门砖没错了。