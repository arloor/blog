mixed-port: 7890
allow-lan: false
external-controller: 0.0.0.0:1234
external-ui: /data/clash/ui
profile:
  store-selected: true

hosts:
  'pi.arloor.com': 192.168.5.234

script:
  shortcuts:
    quic: network == 'udp' and dst_port == 443
    udp: network == 'udp'

rules:
- SCRIPT,quic,REJECT,no-resolve
- DOMAIN-SUFFIX,direct.quickconnect.to,DIRECT
- DOMAIN-SUFFIX,arloor.dev,DIRECT
- DOMAIN-SUFFIX,arloor.com,DIRECT
- DOMAIN-SUFFIX,xiaohongshu.sh,DIRECT
- DOMAIN-SUFFIX,xiaohongshu.com,DIRECT
- DOMAIN-SUFFIX,xhscdn.com,DIRECT
- RULE-SET,apple,直连
- RULE-SET,direct,直连
- RULE-SET,openai,openai
- RULE-SET,netflix,奈飞
- RULE-SET,twitter,推特
- RULE-SET,greatfire,通用
- RULE-SET,proxy,通用
- RULE-SET,gfw,通用
- RULE-SET,telegramcidr,电报,no-resolve
- IP-CIDR,192.168.0.0/16,DIRECT,no-resolve
- IP-CIDR,10.0.0.0/8,DIRECT,no-resolve
- IP-CIDR,172.16.0.0/12,DIRECT,no-resolve
- RULE-SET,cncidr,直连
- GEOIP,CN,直连
- SCRIPT,udp,REJECT,no-resolve
- MATCH,通用

proxy-groups:
- name: 通用
  type: select
  proxies:
    - us
    - hk
    - sg
    - bwg
    - dc9
    - dc6
    - baipiao
    - DIRECT
    - di

- name: 电报
  type: select
  proxies:
    - sg
    - hk
    - bwg
    - dc9
    - dc6
    - baipiao
    - DIRECT
    - di
    - us
- name: 奈飞
  type: select
  proxies:
    - sg
    - dc6
    - dc9
    - bwg
    - hk
    - baipiao
    - DIRECT
    - di
    - us

- name: 推特
  type: select
  proxies:
    - bwg
    - dc6
    - dc9
    - sg
    - hk
    - baipiao
    - DIRECT
    - di
    - us

- name: openai
  type: select
  proxies:
    - dc6
    - bwg
    - dc9
    - sg
    - hk
    - baipiao
    - DIRECT
    - di
    - us


- name: 直连
  type: select
  proxies:
    - DIRECT
    - di
    - hk
    - sg
    - bwg
    - dc9
    - dc6
    - baipiao


proxies:
- name: "gg"
  type: http
  server: gg.arloor.dev
  port: 444
  username: haloshit
  password: 
  tls: true 
  skip-cert-verify: true
- name: "us"
  type: http
  server: us.arloor.dev
  port: 444
  username: haloshit
  password: 
  tls: true 
  skip-cert-verify: true

- name: "di"
  type: http
  server: di.arloor.dev
  port: 444
  username: haloshit
  password: 
  tls: true 
  skip-cert-verify: true

- name: "dc9"
  type: http
  server: dc9.arloor.dev
  port: 444
  username: haloshit
  password: 
  tls: true 
  skip-cert-verify: true

- name: "bwg"
  type: http
  server: bwg.arloor.dev
  port: 444
  username: haloshit
  password: 
  tls: true 
  skip-cert-verify: true

- name: "dc6"
  type: http
  server: dc6.arloor.dev
  port: 444
  username: haloshit
  password: 
  tls: true 
  skip-cert-verify: true
 
- name: "sg"
  type: http
  server: sg.arloor.dev
  port: 444
  username: haloshit
  password: 
  tls: true 
  skip-cert-verify: true

- name: "hk"
  type: http
  server: hk.arloor.dev
  port: 444
  username: haloshit
  password: 
  tls: true 
  skip-cert-verify: true

- name: "baipiao"
  type: http
  server: 216.24.187.88
  port: 444
  username: haloshit
  password: 
  tls: true 
  skip-cert-verify: true

rule-providers:
  twitter:
    behavior: classical 
    type: http
    url: "https://repo-1252282974.cos.ap-shanghai.myqcloud.com/clash/twitter.yaml"
    path: ./ruleset/twitter.yaml
    interval: 86400

  openai:
    behavior: classical 
    type: http
    url: "https://repo-1252282974.cos.ap-shanghai.myqcloud.com/clash/openai.yaml"
    path: ./ruleset/chat.yaml
    interval: 86400

  apple:
    behavior: classical 
    type: http
    url: "https://repo-1252282974.cos.ap-shanghai.myqcloud.com/clash/apple.yaml"
    path: ./ruleset/apple.yaml
    interval: 86400


  netflix:
    behavior: classical 
    type: http
    url: "https://repo-1252282974.cos.ap-shanghai.myqcloud.com/clash/netflix.yaml"
    path: ./ruleset/netflix.yaml
    interval: 86400

  proxy:
    type: http
    behavior: domain
    url: "https://www.arloor.com/clash/ruleset/proxy.txt"
    path: ./ruleset/proxy.yaml
    interval: 86400

  direct:
    type: http
    behavior: domain
    url: "https://www.arloor.com/clash/ruleset/direct.txt"
    path: ./ruleset/direct.yaml
    interval: 86400

  gfw:
    type: http
    behavior: domain
    url: "https://www.arloor.com/clash/ruleset/gfw.txt"
    path: ./ruleset/gfw.yaml
    interval: 86400

  greatfire:
    type: http
    behavior: domain
    url: "https://www.arloor.com/clash/ruleset/greatfire.txt"
    path: ./ruleset/greatfire.yaml
    interval: 86400

  telegramcidr:
    type: http
    behavior: ipcidr
    url: "https://www.arloor.com/clash/ruleset/telegramcidr.txt"
    path: ./ruleset/telegramcidr.yaml
    interval: 86400

  cncidr:
    type: http
    behavior: ipcidr
    url: "https://www.arloor.com/clash/ruleset/cncidr.txt"
    path: ./ruleset/cncidr.yaml
    interval: 86400

experimental:
  sniff-tls-sni: true
  
tun:
  enable: true
  stack: system
  dns-hijack:
    - 8.8.8.8:53
    - tcp://8.8.8.8:53
    - any:53
    - tcp://any:53
  auto-route: true 
  auto-detect-interface: true 

dns:
  enable: true
  #listen: 0.0.0.0:53
  default-nameserver:
    - 119.29.29.29
    - 223.5.5.5
  fake-ip-range: 198.18.0.1/16 # Fake IP addresses pool CIDR
  fake-ip-filter:
    - '*.lan'
    - localhost.ptlogin2.qq.com
  nameserver:
      - 119.29.29.29
      - 114.114.114.114
      - 223.5.5.5
  fallback:
      - https://doh.pub/dns-query
      - https://cloudflare-dns.com/dns-query
      - https://1.12.12.12/dns-query
      - https://120.53.53.53/dns-query
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4
    domain:
      - '+.google.com'
      - '+.facebook.com'
      - '+.youtube.com'