<head>
    <meta charset="utf-8">
</head>
<pre>

wget https://dl.google.com/go/go1.12.3.linux-amd64.tar.gz
tar -C /usr/local -xzf go1.12.3.linux-amd64.tar.gz
export PATH=$PATH:/usr/local/go/bin
rm -rf go/src/github.com/arloor/sogo
rm -f sogo
kill -9 $(lsof -i:7777|tail -1|awk '$1!=""{print $2}')
go get github.com/arloor/sogo
go install   github.com/arloor/sogo
mv go/bin/sogo sogo
chmod +x sogo
./sogo


wget https://dl.google.com/go/go1.12.3.linux-amd64.tar.gz
tar -C /usr/local -xzf go1.12.3.linux-amd64.tar.gz
export PATH=$PATH:/usr/local/go/bin
rm -rf go/src/github.com/arloor/sogo-server
go get github.com/arloor/sogo-server
go install  github.com/arloor/sogo-server
rm -f sogo-server
mv go/bin/sogo-server sogo-server
kill -9 $(lsof -i:80|tail -1|awk '$1!=""{print $2}')
chmod +x sogo-server
./sogo-server
nohup ./sogo-server &

mkdir /root/.ssh
echo ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDZQzKHfZLlFEdaRUjfSK4twhL0y7+v23Ko4EI1nl6E1/zYqloSZCH3WqQFLGA7gnFlqSAfEHgCdD/4Ubei5a49iG0KSPajS6uPkrB/eiirTaGbe8oRKv2ib4R7ndbwdlkcTBLYFxv8ScfFQv6zBVX3ywZtRCboTxDPSmmrNGb2nhPuFFwnbOX8McQO5N4IkeMVedUlC4w5//xxSU67i1i/7kZlpJxMTXywg8nLlTuysQrJHOSQvYHG9a6TbL/tOrh/zwVFbBS+kx7X1DIRoeC0jHlVJSSwSfw6ESrH9JW71cAvn6x6XjjpGdQZJZxpnR1NTiG4Q5Mog7lCNMJjPtwJ 12931@laptop > /root/.ssh/authorized_keys

阿里云ECS  172.31.15.117  /  47.75.201.120 18100
natcloud   219.76.152.121:28100
阿里云轻量  172.17.14.220  / 149.129.115.3 38100

natcloud   219.76.152.121:48100  客户1  4-28到期
河南联通 192.168.9.145  / 182.118.46.69  21000 用于回国 welcomeback2home

nathosts  hknathosts.ddnspod.xyz 58100

passwd=xxxxx #改成你的密码
port=18100   #改成你的端口
# 加密协议默认为支持AEAD的aes-256-gcm

service docker start
docker pull shadowsocks/shadowsocks-libev 
docker run -e PASSWORD=$passwd -p $port:8388 -p $port:8388/udp -d --restart always shadowsocks/shadowsocks-libev
ip=`wget -qO- http://whatismyip.akamai.com`
echo "配置信息: 服务器地址：$ip  端口：$port 密码：$passwd 加密协议：aes-256-gcm"

#香港阿里云8100中转到natcloud 48100
iptables -t nat -A PREROUTING -p tcp --dport 38100 -j DNAT --to-destination 149.129.115.3:38100
iptables -t nat -A PREROUTING -p udp --dport 38100 -j DNAT --to-destination 149.129.115.3:38100
iptables -t nat -A POSTROUTING -p tcp -d 149.129.115.3 --dport 38100 -j SNAT --to-source 192.168.9.145
iptables -t nat -A POSTROUTING -p udp -d 149.129.115.3 --dport 38100 -j SNAT --to-source 192.168.9.145

iptables -t nat -A PREROUTING -p tcp --dport 28100 -j DNAT --to-destination 149.129.115.3:28100
iptables -t nat -A PREROUTING -p udp --dport 28100 -j DNAT --to-destination 149.129.115.3:28100
iptables -t nat -A POSTROUTING -p tcp -d 149.129.115.3 --dport 28100 -j SNAT --to-source 192.168.9.145
iptables -t nat -A POSTROUTING -p udp -d 149.129.115.3 --dport 28100 -j SNAT --to-source 192.168.9.145

iptables -t nat -A PREROUTING -p tcp --dport 58100 -j DNAT --to-destination 149.129.115.3:58100
iptables -t nat -A PREROUTING -p udp --dport 58100 -j DNAT --to-destination 149.129.115.3:58100
iptables -t nat -A POSTROUTING -p tcp -d 149.129.115.3 --dport 58100 -j SNAT --to-source 192.168.9.145
iptables -t nat -A POSTROUTING -p udp -d 149.129.115.3 --dport 58100 -j SNAT --to-source 192.168.9.145

获取公网ip
pip=$(wget -qO- http://ip.360.cn/IPShare/info |grep -E -o "([0-9]{1,3}[\.]){3}[0-9]{1,3}")
#pip=`wget -qO- http://whatismyip.akamai.com`
echo $pip # 42.2.182.125

# ddns的token
arToken="88574,69a5f423035ca0bac9ffd7f75b0ecd1e"